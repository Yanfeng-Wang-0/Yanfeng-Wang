# CMEE Coursework Week 3

- **Author**: Yanfeng Wang (yw4524@ic.ac.uk)  
- **Date**: October 25th, 2024  

---

## Overview

This repository contains R scripts, data, and results developed during Week 3 of the CMEE program. The scripts demonstrate various data processing, visualization, statistical operations, and performance optimization tasks using R.

---

## Directory Structure

- **`code/`**: Contains all R script files (`.R`).  
- **`data/`**: Input files used by the scripts.  
- **`results/`**: Output files generated by the scripts.  
- **`sandbox/`**: A workspace for temporary testing and debugging of scripts. This directory is used for experimentation and may contain intermediate files or scratch work not intended for final results.  

---

## Installation

1. Clone this repository to your local machine:
  ```bash
  git clone https://github.com/your-username/CMEECoursework.git
  cd CMEECoursework

2. (Optional) Ensure all scripts have execution permissions:
  ```bash
  chmod +x code/*.R

3. Verify your system has the required tools and dependencies installed (see below).

---

## Dependencies

- **R**: Ensure you have R installed on your system (version 4.0 or higher is recommended).  
- **Required Libraries**: Some scripts may require additional R packages such as `ggplot2`, `reshape2`, and `MASS`. You can install these libraries using the following command in R:
  ```R
  install.packages(c("ggplot2", "reshape2", "MASS"))

  ---

## Workflow

1. Place your input files in the `data/` directory.  
2. Run the desired script from the `code/` directory or the repository root.  
3. Output files will be saved in the `results/` directory (unless otherwise specified).  
4. Use the `sandbox/` directory for testing or debugging.  

### Example Workflow:
1. To calculate row and column statistics for a random matrix:
  ```bash
  Rscript code/apply1.R

2. To perform operations on each row of a matrix using `SomeOperation`:
  ```bash
  Rscript code/apply2.R

---

## Scripts

### 1. **`apply1.R`**
- **Description**:  
  Creates a 10x10 matrix filled with random numbers from a standard normal distribution. Calculates and prints the mean and variance of each row, and the mean of each column.

- **Features**:  
  - Generates a matrix of random numbers.
  - Computes row-wise and column-wise statistics.
  - Outputs the results to the console.

- **Usage**:  
  Run the script from the command line:  
  ```bash
  Rscript code/apply1.R

### 2. **`apply2.R`**
- **Description**:  
  Defines a function `SomeOperation` that modifies a vector based on the sum of its elements. Applies this function to each row of a random 10x10 matrix and prints the results.

- **Features**:  
  - Implements a custom operation that adjusts rows of a matrix based on conditions.
  - Outputs modified matrix rows.
  - Demonstrates the use of `apply` for efficient row-wise operations.

- **Usage**:  
  Run the script from the command line:  
  ```bash
  Rscript code/apply2.R

### 3. **`basic_io.R`**
- **Description**:  
  Demonstrates reading data, appending rows, and writing data to CSV files with control over row and column names.

- **Features**:  
  - Reads data from CSV files.  
  - Appends new rows to existing data.  
  - Writes data to CSV files with options to include or exclude row and column names.

- **Usage**:  
  Run the script from the command line:  
  ```bash
  Rscript code/basic_io.R

### 4. **`boilerplate.R`**
- **Description**:  
  Defines a generic function `MyFunction` that prints the value and type of its arguments. Handles numeric and character arguments and returns a combined vector.

- **Features**:  
  - Demonstrates the use of a simple R function template.
  - Handles multiple data types, including numeric and character inputs.
  - Combines arguments into a single output vector.

- **Usage**:  
  Run the script from the command line:  
  ```bash
  Rscript code/boilerplate.R

### 5. **`break.R`**
- **Description**:  
  Demonstrates the use of a `break` statement in an infinite loop. It initializes a variable, increments it, and exits the loop when a condition is met.

- **Features**:  
  - Implements an infinite loop with a controlled exit condition.
  - Prints the value of the variable at each iteration.
  - Demonstrates basic control flow in R.

- **Usage**:  
  Run the script from the command line:  
  ```bash
  Rscript code/break.R

### 6. **`browse.R`**
- **Description**:  
  Models exponential population growth over a specified number of generations. The function calculates the population size at each generation using the formula \( N(t) = N(t-1) \times \exp(r) \), and returns a vector of population sizes. A plot visualizes the exponential growth.

- **Features**:  
  - Computes exponential growth using a mathematical model.
  - Customizable parameters for initial population size, growth rate, and number of generations.
  - Generates a plot showing population growth over generations.

- **Usage**:  
  Run the script from the command line:  
  ```bash
  Rscript code/browse.R

### 7. **`control_flow.R`**
- **Description**:  
  Demonstrates various control structures in R, including `if-else` statements, `for` loops, and `while` loops. The script includes examples such as checking conditions, iterating over numbers and character vectors, and calculating squares.

- **Features**:  
  - Conditional checks with `if-else`.
  - Loops for iterating over sequences and performing operations.
  - Examples of working with character and numeric data.

- **Usage**:  
  Run the script from the command line:  
  ```bash
  Rscript code/control_flow.R

### 8. **`DataWrang.R`**
- **Description**:  
  Demonstrates how to read, clean, and reshape data in R. Reads a dataset and its metadata, transposes the data, replaces empty values with zeros, and reshapes it from wide to long format using the `reshape2` package.

- **Features**:  
  - Reads and transposes datasets.  
  - Handles missing values by replacing them with zeros.  
  - Reshapes data from wide to long format for analysis.  
  - Outputs transformed data for verification.

- **Usage**:  
  Run the script from the command line:  
  ```bash
  Rscript code/DataWrang.R

### 9. **`Girko.R`**
- **Description**:  
  Generates a plot that visualizes the eigenvalues of a randomly created matrix. An ellipse representing the distribution of eigenvalues is overlaid on the plot.

- **Features**:  
  - Creates a random 250x250 matrix.  
  - Computes eigenvalues and plots them in the complex plane.  
  - Overlays an ellipse to visualize the eigenvalue distribution.  
  - Adds transparent red shading for clarity.

- **Usage**:  
  Run the script from the command line:  
  ```bash
  Rscript code/Girko.R

### 10. **`MyBar.R`**
- **Description**:  
  Reads a dataset, processes it to add a new column, and visualizes the data using `ggplot2`. Creates a bar plot with vertical line ranges, custom text labels, and customized axes.

- **Features**:  
  - Adds a calculated column to the dataset.
  - Creates a bar plot with distinct color and transparency settings.
  - Customizes axes, text labels, and background for clarity.

- **Usage**:  
  Run the script from the command line:  
  ```bash
  Rscript code/MyBar.R

### 11. **`next.R`**
- **Description**:  
  Loops through numbers from 1 to 10 and prints only the odd numbers. Skips even numbers using the `next` statement.

- **Features**:  
  - Demonstrates the use of the `next` statement in loops.
  - Filters and processes odd numbers in a range.
  - Prints the result to the console.

- **Usage**:  
  Run the script from the command line:  
  ```bash
  Rscript code/next.R

### 12. **`plotLin.R`**
- **Description**:  
  Creates a scatter plot of `y` vs. `x` with a color gradient representing residuals from a linear regression. Adds a regression line, axis labels with mathematical expressions, and a custom text label on the plot.

- **Features**:  
  - Generates a scatter plot with color-coded residuals.  
  - Adds a regression line and mathematical axis labels.  
  - Customizes the plot with additional annotations.

- **Usage**:  
  Run the script from the command line:  
  ```bash
  Rscript code/plotLin.R

### 13. **`preallocate.R`**
- **Description**:  
  Demonstrates and compares the efficiency of two methods for constructing a vector in R:  
  1. Without preallocation, where the vector grows in each iteration.  
  2. With preallocation, where memory is assigned before assigning values.

- **Features**:  
  - Measures execution time for both methods.
  - Highlights the performance benefits of preallocation.
  - Provides insights into efficient R programming practices.

- **Usage**:  
  Run the script from the command line:  
  ```bash
  Rscript code/preallocate.R

### 14. **`R_conditionals.R`**
- **Description**:  
  This R script defines three functions that check different properties of a number:
  1. `is.even`: Determines whether a number is even or odd.
  2. `is.power2`: Checks if a number is a power of 2.
  3. `is.prime`: Identifies whether a number is prime, composite, or zero/unit.

- **Features**:  
  - Efficiently determines basic numerical properties.
  - Modular functions for reuse in other scripts.
  - Handles edge cases for inputs like zero and one.

- **Usage**:  
  Run the script and use the functions interactively in an R console:
  ```bash
  Rscript code/R_conditionals.R

### 15. **`sample.R`**
- **Description**:  
  Compares the efficiency of different methods for sampling and calculating the mean of subsets from a population. Evaluates the performance of various approaches to looping and vectorization in R.

- **Features**:  
  - Compares vectorized and iterative methods for sampling.
  - Measures and outputs execution time for each approach.
  - Demonstrates best practices for efficient computation in R.

- **Usage**:  
  Run the script from the command line:  
  ```bash
  Rscript code/sample.R

### 16. **`TreeHeight.R`**
- **Description**:  
  Calculates the height of a tree based on the angle of elevation and the distance from the tree using trigonometry.

- **Features**:  
  - Takes angle of elevation and distance as inputs.
  - Computes tree height using the formula: `height = distance * tan(angle)`.
  - Outputs the computed tree height to the console.

- **Usage**:  
  Run the script from the command line:  
  ```bash
  Rscript code/TreeHeight.R

### 17. **`try.R`**
- **Description**:  
  Demonstrates how to handle errors in repetitive function calls (via `lapply`) and within a `for` loop. Uses `try` to catch errors and prevent the process from terminating when an error occurs.

- **Features**:  
  - Implements error handling using the `try` function.
  - Allows for robust execution of repetitive operations.
  - Logs errors without interrupting the workflow.

- **Usage**:  
  Run the script from the command line:  
  ```bash
  Rscript code/try.R

### 18. **`Vectorize1.R`**
- **Description**:  
  Compares the time taken to calculate the sum of all elements in a matrix using two approaches: a manual nested loop and the built-in vectorized `sum()` function.

- **Features**:  
  - Demonstrates the efficiency of vectorized operations in R.
  - Compares manual looping with R's built-in vectorized functions.
  - Measures and prints execution time for both methods.

- **Usage**:  
  Run the script from the command line:  
  ```bash
  Rscript code/Vectorize1.R



