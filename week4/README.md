# CMEE Coursework Week 4

- **Author**: Yanfeng Wang (yw4524@ic.ac.uk)  
- **Date**: November 30th, 2024  

---

## Overview

This repository contains R and LaTeX scripts, data, and results developed during Week 4 of the CMEE program. The tasks include investigating temperature trends, analyzing predator-prey relationships, and calculating tree heights based on provided datasets.

---

## Directory Structure

- **`code/`**: Contains all R and LaTeX script files.  
- **`data/`**: Input files used by the scripts.  
- **`results/`**: Output files generated by the scripts, such as PDFs and CSV files.  
- **`sandbox/`**: A workspace for temporary testing and debugging of scripts. This directory may contain intermediate files or scratch work not intended for final results.  

---

## Workflow

1. Place your input files in the `data/` directory.  
2. Run the desired script from the `code/` directory or the repository root.  
3. Output files will be saved in the `results/` directory (unless otherwise specified).  
4. Use the `sandbox/` directory for testing or debugging.  

### Example Workflow:
1. To analyze temperature trends in Florida:
  ```bash
  Rscript code/Florida.R
  ```

2. To compute tree heights based on angle and distance:
  ```bash
  Rscript code/TreeHeight.R
  ```

---

## Scripts

### 1. **`Florida_Correlation.tex`**
- **Description**:  
  A LaTeX report investigating temperature trends in Key West, Florida, during the 20th century. It includes the following sections:
  - **Introduction**: Explains the aim of the study (to determine if there is significant warming).  
  - **Methods**: Describes the use of permutation analysis to assess correlation significance.  
  - **Results**: Highlights findings, including a histogram of random correlation coefficients, with the observed correlation coefficient (~0.533) not exceeded by random values (\textit{p}-value = 0).  
  - **Conclusion**: Concludes that significant warming occurred in Key West during the 20th century.

- **Features**:  
  - Produces a well-structured scientific report.
  - Visualizes results (e.g., histograms) and highlights statistical significance.
  - Outputs a PDF document.

- **Usage**:  
  Compile the LaTeX file using a LaTeX editor or command-line tool:
  ```bash
  pdflatex Florida_Correlation.tex
  ```

  ### 2. **`Florida.R`**
- **Description**:  
  Analyzes annual mean temperature data (1901â€“2000) from Key West, Florida. It calculates the observed correlation between the year and temperature, performs a permutation test to evaluate statistical significance, and visualizes the results.

- **Features**:  
  - Computes correlation coefficients between year and temperature.
  - Performs a permutation test to generate a null distribution of correlation coefficients.
  - Produces two PDF plots:  
    1. A histogram of random correlation coefficients.  
    2. A scatter plot of temperature vs. year with a fitted regression line.

- **Usage**:  
  Run the script from the command line:
  ```bash
  Rscript code/Florida.R
  ```

### 3. **`PP_Regress.R`**
- **Description**:  
  Analyzes predator-prey data to explore the relationship between prey mass and predator mass. The script performs the following steps:
  - Reads the dataset and adds log-transformed columns for `Prey.mass` and `Predator.mass`.  
  - Summarizes data by feeding interaction type and predator lifestage.  
  - Creates a regression plot of predator mass vs. prey mass, grouped by feeding interactions.  
  - Fits linear models to calculate regression slopes, intercepts, R-squared values, and p-values for each feeding interaction and predator lifestage.  
  - Saves the regression results as a CSV file.

- **Features**:  
  - Visualizes predator-prey relationships using regression plots.
  - Performs linear regression analysis with detailed statistical outputs.
  - Outputs a CSV file with regression results and a PDF plot.

- **Usage**:  
  Run the script from the command line:
  ```bash
  Rscript code/PP_Regress.R
  ```

### 4. **`TreeHeight.R`**
- **Description**:  
  Computes tree heights based on angles of elevation and distances provided in a dataset. The script defines a function to calculate individual tree heights using trigonometry.

- **Features**:  
  - Calculates tree heights using the formula:  
    \[
    \text{Tree Height} = \tan(\text{Angle}) \times \text{Distance}
    \]
  - Reads input data (angles and distances) from a CSV file.
  - Saves computed tree heights to a new CSV file.

- **Usage**:  
  Run the script from the command line:
  ```bash
  Rscript code/TreeHeight.R
  ```
